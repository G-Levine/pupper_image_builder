#cloud-config
autoinstall:
  version: 1
  identity:
    hostname: pupper
    username: pi
    password: $5$BLNMiSCqTv$Z63o/QZDIqwP/MeWctC4/LFFDbQ5qwhADJGH5IJow.D
  ssh:
    install-server: true
    allow-pw: true
  user-data:
    manage_etc_hosts: true
    groups:
      - realtime
    users:
      - name: pi
        groups: users,adm,dialout,audio,netdev,video,plugdev,cdrom,games,input,gpio,spi,i2c,render,sudo,realtime
        shell: /bin/bash
        lock_passwd: false
        passwd: $5$BLNMiSCqTv$Z63o/QZDIqwP/MeWctC4/LFFDbQ5qwhADJGH5IJow.D

  locale: en_US.UTF-8
  keyboard:
    layout: 'us'
  network:
    version: 2
    ethernets:
      eth0:
        dhcp4: true
        optional: true

  storage:
    layout:
      name: lvm  # Adjust this if you need a specific storage layout
  runcmd:
    - echo -e '@realtime soft rtprio 99\n@realtime soft priority 99\n@realtime soft memlock 102400\n@realtime hard rtprio 99\n@realtime hard priority 99\n@realtime hard memlock 102400' | sudo tee -a /etc/security/limits.conf
    - chown -R pi /home/pi
